# CannonPop PWA - Cursor AI Rules

## Project Structure
- **Source:** `/src` - All source code (TypeScript, Svelte, HTML)
- **Static Assets:** `/public` - Icons, audio, libs (copied as-is to build)
- **Build Output:** `/docs` - Generated by `npm run build` (GitHub Pages serves from here)

## Critical Rules

### 1. NEVER Edit /docs Directly
- `/docs` is AUTO-GENERATED by the build process
- Any manual edits to `/docs` will be OVERWRITTEN on next build
- Always edit source files in `/src` or `/public`

### 2. Deployment Pattern: /src → /docs
- We use the `/src` → `/docs` pattern for GitHub Pages deployment
- `npm run build` compiles `/src` and copies `/public` to `/docs`
- GitHub Pages serves from `/docs` directory automatically
- NO GitHub Actions needed - just push to main

### 3. Port Management
- **Dev Port:** 3002 (registered in PORT_REGISTRY.md)
- Use `npm run port` to check current port
- Use `npm run port:kill` if port conflicts occur
- Use `npm run port:force` to kill and restart

### 4. File Locations
- HTML files: `/src/*.html`
- TypeScript/Svelte: `/src/**/*.{ts,svelte}`
- Service Worker: `/src/sw.js`
- Manifest: `/public/manifest.json`
- CNAME: `/public/CNAME`
- Icons: `/public/icons/*.svg`

### 5. Development Workflow
```bash
npm run dev        # Start dev server on port 3002
npm run build      # Build to /docs
git add -A
git commit -m "feat: your changes"
git push origin main  # Deploys to cannonpop.523.life
```

### 6. Best Practices (from PWA guides)
- Follow patterns in `/peadoubleueh/project-docs/`
- Mobile-first design principles
- Touch + click event handling
- Page-based navigation over modals
- Conditional logging (Logger utility)

## Testing
- **Local:** http://localhost:3002
- **Production:** https://cannonpop.523.life

## References
- Main PWA docs: `../peadoubleueh/project-docs/`
- Port registry: `../peadoubleueh/PORT_REGISTRY.md`
- Deployment guide: `../peadoubleueh/project-docs/DEPLOYMENT_ARCHITECTURE.md`


# ğŸ® CannonPop - Mobile-First Bubble Shooter PWA

A modern, mobile-first Progressive Web App implementation of the classic bubble shooter game, built with Svelte, TypeScript, and Phaser 3.

## ğŸš€ **Live Demo**
**[Play CannonPop](https://cannonpop.523.life/)** - Mobile-optimized PWA

ğŸ“± **Mobile-First Design** â€¢ ğŸ® **Play on Any Device** â€¢ âš¡ **Offline Capable**

---

## âœ¨ **Features**

### ğŸ¯ **Core Game Features**
- **Hexagonal Grid System**: Precise bubble placement
- **Physics-Based Shooting**: Realistic trajectory with wall bouncing
- **Cluster Detection**: Advanced matching algorithm
- **Exponential Scoring**: Rewarding strategic play

### ğŸ“± **PWA Features**
- **Mobile-First Design**: Optimized for touch interactions
- **Offline Capability**: Play anywhere with service worker caching
- **Installable**: Add to home screen on mobile and desktop
- **Responsive**: Adaptive sizing for all screen sizes

---

## ğŸ **Quick Start**

### **Development**
```bash
# Install dependencies
npm install

# Start development server (port 3002)
npm run dev

# Open browser
open http://localhost:3002
```

### **Production**
```bash
# Build for production
npm run build

# Preview production build
npm run preview

# Deploy (just push to main)
git add -A
git commit -m "feat: your changes"
git push origin main  # Auto-deploys to cannonpop.523.life
```

### **Port Management**
```bash
# Check assigned port
npm run port

# Check if port 3002 is free
npm run port:check

# Kill process on port 3002
npm run port:kill

# Force restart (kill + start)
npm run port:force
```

---

## ğŸ“‚ **Project Structure**

Following the `/src` â†’ `/docs` deployment pattern ([see guide](../peadoubleueh/project-docs/DEPLOYMENT_ARCHITECTURE.md)):

```
CannonPop/
â”œâ”€â”€ src/                  # Source code (edit here)
â”‚   â”œâ”€â”€ index.html        # Main app entry
â”‚   â”œâ”€â”€ game.html         # Game entry
â”‚   â”œâ”€â”€ main.ts           # Svelte app entry point
â”‚   â”œâ”€â”€ game-main.ts      # Phaser game entry point
â”‚   â”œâ”€â”€ sw.js             # Service worker
â”‚   â”œâ”€â”€ App.svelte        # Main Svelte component
â”‚   â”œâ”€â”€ app/              # Svelte components
â”‚   â””â”€â”€ game/             # Phaser game logic
â”‚       â”œâ”€â”€ scenes/       # Game scenes
â”‚       â””â”€â”€ managers/     # Game managers
â”‚
â”œâ”€â”€ public/               # Static assets (copied to build)
â”‚   â”œâ”€â”€ manifest.json     # PWA manifest
â”‚   â”œâ”€â”€ CNAME             # Custom domain config
â”‚   â”œâ”€â”€ icons/            # App icons
â”‚   â”œâ”€â”€ audio/            # Game audio
â”‚   â”œâ”€â”€ libs/             # Phaser library
â”‚   â””â”€â”€ screenshots/      # App screenshots
â”‚
â”œâ”€â”€ docs/                 # Build output (auto-generated)
â”‚   â””â”€â”€ [Built files]     # GitHub Pages serves from here
â”‚
â”œâ”€â”€ vite.config.ts        # Vite build configuration
â”œâ”€â”€ package.json          # Dependencies and scripts
â””â”€â”€ README.md             # This file
```

### **âš ï¸ Critical Rules**
1. **NEVER edit `/docs` directly** - it's auto-generated by `npm run build`
2. **Always edit source files** in `/src` or `/public`
3. **GitHub Pages** automatically serves from `/docs` on push to main
4. **No GitHub Actions needed** - simple push deployment

---

## ğŸ› ï¸ **Technology Stack**

- **UI Framework**: [Svelte](https://svelte.dev/) - Minimal bundle, no runtime
- **Game Engine**: [Phaser 3](https://phaser.io/) - 2D game development
- **Build Tool**: [Vite](https://vitejs.dev/) - Fast dev, optimized builds
- **Language**: TypeScript - Type safety
- **Deployment**: GitHub Pages - Simple static hosting
- **PWA**: Service Worker + Web App Manifest

---

## ğŸ® **Game Architecture**

### **Multi-Page Setup**
- **`index.html`** (Main App): Svelte-based UI shell
- **`game.html`** (Game): Phaser-based game engine

### **PostMessage Communication**
```typescript
// Svelte App â†’ Game
gameIframe.contentWindow.postMessage({ action: 'pause' }, '*');

// Game â†’ Svelte App  
window.parent.postMessage({ event: 'scoreUpdate', score: 1500 }, '*');
```

---

## ğŸ”§ **Development Workflow**

### **1. Make Changes**
Edit files in `/src` or `/public`:
- UI components: `/src/app/`
- Game logic: `/src/game/`
- Styles: `/src/**/*.css`
- Static assets: `/public/`

### **2. Test Locally**
```bash
npm run dev  # http://localhost:3002
```

### **3. Build for Production**
```bash
npm run build  # Outputs to /docs
```

### **4. Deploy**
```bash
git add -A
git commit -m "feat: your feature"
git push origin main  # Live at cannonpop.523.life
```

---

## ğŸ“š **PWA Best Practices**

This project follows PWA best practices from [peadoubleueh/project-docs](../peadoubleueh/project-docs/):

âœ… **Mobile-First Design** - Touch-optimized interactions  
âœ… **Offline-First** - Service worker caching  
âœ… **Page-Based Navigation** - Better than modals on mobile  
âœ… **Conditional Logging** - Silent in production  
âœ… **Port Management** - No conflicts with other PWAs  

See the [PWA Development Lessons](../peadoubleueh/project-docs/PWA_DEVELOPMENT_LESSONS.md) for complete guidance.

---

## ğŸ§ª **Testing**

### **Local Testing**
- **Dev Server**: http://localhost:3002 (port 3002)
- **Preview Build**: `npm run preview` (port 3003)

### **Production Testing**
- **Live URL**: https://cannonpop.523.life/
- **Mobile**: Test on actual devices
- **PWA Install**: Test "Add to Home Screen"

### **Port Conflicts?**
```bash
npm run port:kill   # Kill process on port 3002
npm run port:force  # Kill and restart
```

---

## ğŸ“Š **Performance**

- **Svelte Bundle**: ~10KB compiled (no runtime)
- **Phaser Engine**: ~700KB (loaded from CDN/public)
- **PWA Shell**: <50KB (excluding game engine)
- **First Paint**: <1s on 4G

---

## ğŸ¤ **Contributing**

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Follow the established patterns (see [PWA guides](../peadoubleueh/project-docs/))
4. Test on multiple devices
5. Commit changes (`git commit -m 'feat: Add amazing feature'`)
6. Push to branch (`git push origin feature/amazing-feature`)
7. Open a Pull Request

---

## ğŸ“„ **License**

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ”— **Related Projects**

- **[PWA Template](../peadoubleueh/)** - Base PWA template with all best practices
- **[Giffer](../Giffer/)** - Video to GIF converter PWA
- **[Port Registry](../peadoubleueh/PORT_REGISTRY.md)** - Multi-PWA port management

---

**Built with â¤ï¸ for the mobile-first web**

*Implements advanced PWA patterns learned from real-world production deployments, focusing on mobile-first design, offline capabilities, and maintainable architecture.*

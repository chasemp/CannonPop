const M=()=>window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1")||localStorage.getItem("debug")==="true",u={log:(...e)=>{M()&&console.log("[GAME]",...e)},warn:(...e)=>{M()&&console.warn("[GAME]",...e)},error:(...e)=>{console.error("[GAME]",...e)},info:(e,...n)=>{M()&&console.log("[GAME]",e,...n)}},h={type:Phaser.AUTO,width:400,height:600,parent:"game-container",backgroundColor:"#fff5e1",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:V,create:X,update:H},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:400,height:600,min:{width:320,height:480},max:{width:500,height:800}},input:{activePointers:3,touch:{capture:!0}},render:{antialias:!1,pixelArt:!1,roundPixels:!0}};let C,t={currentState:"MENU",score:0,level:1,shotsFired:0,shotsUntilCeilingDrop:6,canShoot:!1,lastStateChangeTime:0,powerUps:{bomb:0,rainbow:0,laser:0},specialBubbles:[],activePowerUp:null,grid:[],currentBubble:null,nextBubble:null,launcher:null,cannonBarrel:null,bubbleGroup:null,isAiming:!1,aimingLine:null,currentAimAngle:0,scoreText:null,levelText:null,shotsText:null,stateText:null,powerUpUI:null,menuContainer:null,gameOverContainer:null,bubblesCleared:0,totalBubbles:0,ceilingRow:0,startTime:null,lastShotTime:null};const g={MENU:"MENU",PLAYING:"PLAYING",PAUSED:"PAUSED",GAME_OVER:"GAME_OVER",LEVEL_COMPLETE:"LEVEL_COMPLETE"},m=8,y=12,p=20,A=["blue","red","yellow","cream","green","purple"];function V(){u.log("🎯 Phaser preload() called"),u.log("🔍 Scale dimensions:",this.scale.width,"x",this.scale.height),this.load.image("splash-logo","/images/cannon_with_text.png"),A.forEach(e=>{ae.call(this,e)}),u.log("🎮 Game assets loaded")}function X(){u.log("🚀 Initializing CannonPop game..."),t.bubbleGroup=this.physics.add.group(),D.call(this),q.call(this),t.aimingLine=this.add.graphics(),t.aimingLine.setDepth(15),J.call(this),w.call(this,g.MENU),window.handleGameLoaded&&window.handleGameLoaded(),u.log("✅ CannonPop game initialized")}function H(){switch(t.currentState){case g.PLAYING:t.currentBubble&&Ce.call(this),pe.call(this),we.call(this);break}}function w(e,n={}){const i=t.currentState;u.log(`🔄 State change: ${i} → ${e}`),$.call(this,i),t.currentState=e,t.lastStateChangeTime=Date.now(),t.canShoot=!1,e===g.PLAYING&&setTimeout(()=>{t.canShoot=!0},300),W.call(this,e,n),window.handleScoreUpdate&&window.handleScoreUpdate({event:"stateChanged",oldState:i,newState:e,data:n})}function $(e){switch(e){case g.MENU:re.call(this);break;case g.PLAYING:break;case g.GAME_OVER:ce.call(this);break;case g.LEVEL_COMPLETE:ue.call(this);break}}function W(e,n){switch(e){case g.MENU:le.call(this);break;case g.PLAYING:ye.call(this,n);break;case g.PAUSED:he.call(this);break;case g.GAME_OVER:t.score>0&&ve(t.score,t.level),se.call(this,n);break;case g.LEVEL_COMPLETE:de.call(this,n);break}Se.call(this)}function D(){t.grid=[];for(let e=0;e<y;e++){t.grid[e]=[];for(let n=0;n<m;n++)t.grid[e][n]=null}F.call(this)}const _=60,Y=60;function S(e,n){const i=n%2*p,o=_+e*p*2+i,l=Y+n*p*1.7;return{x:o,y:l}}function L(e,n){const i=Math.round((n-Y)/(p*1.7)),o=i%2*p,l=Math.round((e-_-o)/(p*2)),a=Math.max(0,Math.min(m-1,l)),c=Math.max(0,Math.min(y-1,i));return{col:a,row:c}}function F(){const e=[["red","blue","red","blue","red","blue","red","blue"],["blue","green","blue","green","blue","green","blue"],["green","yellow","green","yellow","green","yellow","green","yellow"],["yellow","purple","yellow","purple","yellow","purple","yellow"],["purple","red","purple","red","purple","red","purple","red"]];for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)if(e[n][i]&&i<m){const o=e[n][i],l=S(i,n),a=this.physics.add.sprite(l.x,l.y,o+"_bubble");a.setCircle(p),a.setImmovable(!0),a.color=o,a.setDepth(20),a.gridCol=i,a.gridRow=n,t.bubbleGroup.add(a),t.grid[n][i]=a}}function q(){const e=h.width/2,n=h.height-60;t.launcher=this.add.container(e,n),t.launcher.setDepth(10);const i=this.add.rectangle(0,20,90,30,4473924);i.setStrokeStyle(3,2236962),t.launcher.add(i);const o=this.add.rectangle(-30,35,15,20,3355443);o.setStrokeStyle(2,1118481);const l=this.add.rectangle(30,35,15,20,3355443);l.setStrokeStyle(2,1118481),t.launcher.add([o,l]);const a=this.add.rectangle(0,15,70,8,5592405);a.setStrokeStyle(1,3355443),t.launcher.add(a),t.cannonBarrel=this.add.rectangle(0,-5,70,18,5592405),t.cannonBarrel.setStrokeStyle(2,3355443),t.cannonBarrel.setOrigin(.8,.5),t.launcher.add(t.cannonBarrel);const c=this.add.circle(-25,-5,12,2236962);c.setStrokeStyle(3,1118481),t.launcher.add(c);const r=this.add.rectangle(-10,-5,4,22,4473924),s=this.add.rectangle(5,-5,4,22,4473924);t.launcher.add([r,s]);const f=this.add.circle(15,-5,8,3355443);f.setStrokeStyle(2,1118481),t.launcher.add(f);const d=this.add.triangle(-35,-10,0,0,8,-12,0,-8,16739125),b=this.add.triangle(35,-10,0,0,-8,-12,0,-8,16739125);t.launcher.add([d,b]),t.cannonOriginalY=n,t.cannonBarrel=t.cannonBarrel,I.call(this),N.call(this)}function I(){t.currentBubble&&t.currentBubble.destroy();const e=t.nextBubble?t.nextBubble.color:U(),n=h.width/2,i=h.height-60;t.currentBubble=this.physics.add.sprite(n,i-40,e+"_bubble"),t.currentBubble.setCircle(p),t.currentBubble.color=e,t.currentBubble.setDepth(20),N.call(this)}function N(){t.nextBubble&&t.nextBubble.destroy();const e=U(),n=h.width-60,i=h.height-60;t.nextBubble=this.add.sprite(n,i,e+"_bubble"),t.nextBubble.setScale(.7),t.nextBubble.color=e,t.nextBubble.setDepth(20)}function J(){this.input.on("pointerdown",j.bind(this)),this.input.on("pointermove",Q.bind(this)),this.input.on("pointerup",K.bind(this)),this.input.addPointer(2),this.input.topOnly=!1}function j(e){switch(navigator.vibrate&&e.event&&e.event.touches&&navigator.vibrate(50),t.touchStartX=e.x,t.touchStartY=e.y,t.touchStartTime=Date.now(),t.currentState){case g.MENU:ge.call(this,e.x,e.y);break;case g.PLAYING:t.currentBubble&&Pe.call(this,e.x,e.y);break;case g.PAUSED:me.call(this,e.x,e.y);break;case g.GAME_OVER:fe.call(this,e.x,e.y);break;case g.LEVEL_COMPLETE:be.call(this,e.x,e.y);break}}function Q(e){t.currentState!==g.PLAYING||!t.currentBubble||(Me.call(this,e.x,e.y),t.aimingLine&&z.call(this,e.x,e.y))}function K(e){if(t.currentState!==g.PLAYING||!t.currentBubble)return;if(!t.canShoot){u.log("🚫 Shooting blocked - too soon after state change"),T.call(this);return}const n=Date.now()-t.touchStartTime,i=Phaser.Math.Distance.Between(t.touchStartX,t.touchStartY,e.x,e.y);n<200&&i<20?k.call(this,e.x,e.y):t.isAiming&&k.call(this,e.x,e.y),T.call(this)}function k(e,n){if(!t.currentBubble)return;t.shotsFired++;const i=h.width/2,o=h.height-60,l=Phaser.Math.Angle.Between(i,o-40,e,n),a=300,c=Math.cos(l)*a,r=Math.sin(l)*a;t.currentBubble.setVelocity(c,r),t.currentBubble.setBounce(.8,.8),t.currentBubble.setCollideWorldBounds(!0),t.currentBubble.setData("inFlight",!0),this.physics.add.overlap(t.currentBubble,t.bubbleGroup,(s,f)=>{s.getData("inFlight")&&(s.setData("inFlight",!1),Z.call(this,s,f))},null,this),t.currentBubble=null,window.handleScoreUpdate&&window.handleScoreUpdate({event:"gameStats",score:t.score,level:t.level,shots:t.shotsFired}),this.time.delayedCall(500,()=>{I.call(this)})}function Z(e,n){e.setVelocity(0,0),e.body.enable=!1;const i=L(n.x,n.y),o=ee(i.col,i.row,e.x,e.y);if(!o){const a=L(e.x,e.y);if(O(a.col,a.row)&&!t.grid[a.row][a.col]){const r=S(a.col,a.row);e.setPosition(r.x,r.y),t.bubbleGroup.add(e),t.grid[a.row][a.col]={color:e.texture.key.replace("_bubble",""),sprite:e},G.call(this,a.col,a.row);return}const c=te(e.x,e.y);if(c){const r=S(c.col,c.row);e.setPosition(r.x,r.y),t.bubbleGroup.add(e),t.grid[c.row][c.col]={color:e.texture.key.replace("_bubble",""),sprite:e},G.call(this,c.col,c.row);return}u.warn("⚠️ No valid position found, destroying bubble"),e.destroy();return}const l=S(o.col,o.row);e.setPosition(l.x,l.y),t.bubbleGroup.add(e),t.grid[o.row]&&(t.grid[o.row][o.col]={color:e.texture.key.replace("_bubble",""),sprite:e}),G.call(this,o.col,o.row)}function ee(e,n,i,o){const l=n%2===0;let a;l?a=[{c:e-1,r:n},{c:e+1,r:n},{c:e-1,r:n-1},{c:e,r:n-1},{c:e-1,r:n+1},{c:e,r:n+1}]:a=[{c:e-1,r:n},{c:e+1,r:n},{c:e,r:n-1},{c:e+1,r:n-1},{c:e,r:n+1},{c:e+1,r:n+1}];const c=a.filter(({c:r,r:s})=>O(r,s)&&!t.grid[s][r]);return c.length===0?null:(i!==void 0&&o!==void 0&&c.sort((r,s)=>{const f=S(r.c,r.r),d=S(s.c,s.r),b=Phaser.Math.Distance.Between(i,o,f.x,f.y),x=Phaser.Math.Distance.Between(i,o,d.x,d.y);return b-x}),{col:c[0].c,row:c[0].r})}function te(e,n){const i=L(e,n),o=3;for(let l=0;l<=o;l++)for(let a=Math.max(0,i.row-l);a<=Math.min(y-1,i.row+l);a++)for(let c=Math.max(0,i.col-l);c<=Math.min(m-1,i.col+l);c++)if(O(c,a)&&!t.grid[a][c])return{col:c,row:a};return null}function O(e,n){return n>=0&&n<y&&e>=0&&e<m}function G(e,n){const i=t.grid[n][e];if(!i)return;let o;if(i.color)o=i.color;else if(i.texture&&i.texture.key)o=i.texture.key.replace("_bubble","");else return;const l=new Set,a=[];function c(r,s){const f=`${r},${s}`;if(l.has(f)||!t.grid[s]||!t.grid[s][r])return;const d=t.grid[s][r];let b;if(d.color)b=d.color;else if(d.texture&&d.texture.key)b=d.texture.key.replace("_bubble","");else return;if(b!==o)return;l.add(f),a.push({col:r,row:s});const x=s%2===0;let v;x?v=[{c:r-1,r:s},{c:r+1,r:s},{c:r-1,r:s-1},{c:r,r:s-1},{c:r-1,r:s+1},{c:r,r:s+1}]:v=[{c:r-1,r:s},{c:r+1,r:s},{c:r,r:s-1},{c:r+1,r:s-1},{c:r,r:s+1},{c:r+1,r:s+1}],v.forEach(({c:E,r:P})=>{E>=0&&E<m&&P>=0&&P<y&&c(E,P)})}c(e,n),a.length>=3&&(a.forEach(({col:r,row:s})=>{if(t.grid[s]&&t.grid[s][r]){const f=t.grid[s][r];let d=null;f.sprite?d=f.sprite:f.destroy&&(d=f),d&&d.x!==void 0&&d.y!==void 0&&oe.call(this,d.x,d.y,d),d&&d.destroy&&typeof d.destroy=="function"&&this.time.delayedCall(150,()=>{d.active&&d.destroy()}),t.grid[s][r]=null}}),B(a.length*10),ie.call(this))}function ne(){const e=new Set;function n(i,o){const l=`${i},${o}`;if(e.has(l)||!t.grid[o]||!t.grid[o][i])return;e.add(l);const a=o%2===0;let c;a?c=[{c:i-1,r:o},{c:i+1,r:o},{c:i-1,r:o-1},{c:i,r:o-1},{c:i-1,r:o+1},{c:i,r:o+1}]:c=[{c:i-1,r:o},{c:i+1,r:o},{c:i,r:o-1},{c:i+1,r:o-1},{c:i,r:o+1},{c:i+1,r:o+1}],c.forEach(({c:r,r:s})=>{r>=0&&r<m&&s>=0&&s<y&&n(r,s)})}for(let i=0;i<m;i++)t.grid[0][i]&&n(i,0);return e}function ie(){const e=ne(),n=[];for(let i=0;i<y;i++)for(let o=0;o<m;o++)if(t.grid[i][o]){const l=`${o},${i}`;e.has(l)||n.push({col:o,row:i})}n.length>0&&(u.log(`💧 Dropping ${n.length} floating bubble(s)`),n.forEach(({col:i,row:o})=>{const l=t.grid[o][i];let a=null;l.sprite?a=l.sprite:l.destroy&&(a=l),a&&a.destroy&&typeof a.destroy=="function"&&this.tweens.add({targets:a,y:h.height+100,angle:Math.random()*360,alpha:.5,duration:800+Math.random()*400,ease:"Quad.easeIn",onComplete:()=>{a.active&&a.destroy()}}),t.grid[o][i]=null}),B(n.length*20))}function oe(e,n,i){let o=16777215;if(i.texture&&i.texture.key){const r=i.texture.key.replace("_bubble","");o=R(r)}this.tweens.add({targets:i,scaleX:1.3,scaleY:1.3,alpha:0,duration:150,ease:"Power2"});const l=8;for(let r=0;r<l;r++){const s=r/l*Math.PI*2,f=30+Math.random()*20,d=e+Math.cos(s)*f,b=n+Math.sin(s)*f,x=this.add.circle(e,n,3+Math.random()*3,o,.8);this.tweens.add({targets:x,x:d,y:b,alpha:0,scaleX:.5,scaleY:.5,duration:200+Math.random()*100,ease:"Power2",onComplete:()=>x.destroy()})}const a=this.add.circle(e,n,p,16777215,.6);this.tweens.add({targets:a,scaleX:1.5,scaleY:1.5,alpha:0,duration:150,ease:"Power2",onComplete:()=>a.destroy()});const c=this.add.text(e,n,"+10",{fontSize:"16px",fill:"#ffff00",fontFamily:"Arial",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5);this.tweens.add({targets:c,y:n-30,alpha:0,duration:400,ease:"Power2",onComplete:()=>c.destroy()})}function ae(e){const n=this.add.graphics(),i=p,o=R(e);n.fillStyle(o,1),n.fillEllipse(i,i-2,i*2,i*2.1),n.fillStyle(16777215,.1),n.fillEllipse(i-4,i-5,4,6);const l=i*2+4,a=i*2+4;n.generateTexture(e+"_bubble",l,a),n.destroy()}function le(){if(t.menuContainer){t.menuContainer.setVisible(!0);return}t.menuContainer=this.add.container(h.width/2,h.height/2);const e=this.add.rectangle(0,0,h.width-40,h.height-100,0,.8);e.setStrokeStyle(2,9268835);const n=this.add.container(0,-100),i=this.add.image(0,0,"splash-logo"),o=h.width*.8,l=200,a=o/i.width,c=l/i.height,r=Math.min(a,c,1);i.setScale(r),n.add(i);const s=this.add.text(0,80,"Shoot cannons, pop balloons.",{fontSize:"18px",fill:"#f5f1e8",fontFamily:"Arial",fontStyle:"italic",align:"center"}).setOrigin(.5),f=this.add.text(0,110,"Match 3+ to clear • Clear all to win!",{fontSize:"13px",fill:"#d5d1c8",fontFamily:"Arial",align:"center"}).setOrigin(.5),d=this.add.rectangle(0,160,200,50,9268835);d.setStrokeStyle(2,16118248),d.setInteractive({useHandCursor:!0});const b=this.add.text(0,160,"Start Game",{fontSize:"18px",fill:"#f5f1e8",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5);t.menuContainer.add([e,n,s,f,d,b]),d.buttonType="start"}function re(){t.menuContainer&&t.menuContainer.setVisible(!1)}function se(e){if(t.gameOverContainer){t.gameOverContainer.setVisible(!0);return}t.gameOverContainer=this.add.container(h.width/2,h.height/2);const n=this.add.rectangle(0,0,h.width-40,h.height-100,0,.9);n.setStrokeStyle(2,16729156);const i=this.add.text(0,-120,"💥 Game Over",{fontSize:"28px",fill:"#ff4444",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5),o=this.add.text(0,-70,`Final Score: ${t.score.toLocaleString()}`,{fontSize:"18px",fill:"#f5f1e8",fontFamily:"Arial"}).setOrigin(.5),l=this.add.text(0,-40,`Level Reached: ${t.level}`,{fontSize:"16px",fill:"#8d6e63",fontFamily:"Arial"}).setOrigin(.5),a=this.add.rectangle(0,20,180,45,9268835);a.setStrokeStyle(2,16118248),a.setInteractive({useHandCursor:!0});const c=this.add.text(0,20,"Play Again",{fontSize:"16px",fill:"#f5f1e8",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5),r=this.add.rectangle(0,80,140,40,6114933);r.setStrokeStyle(2,16118248),r.setInteractive({useHandCursor:!0});const s=this.add.text(0,80,"Main Menu",{fontSize:"14px",fill:"#f5f1e8",fontFamily:"Arial"}).setOrigin(.5);t.gameOverContainer.add([n,i,o,l,a,c,r,s]),a.buttonType="restart",r.buttonType="menu"}function ce(){t.gameOverContainer&&t.gameOverContainer.setVisible(!1)}function de(e){}function ue(){t.levelCompleteContainer&&t.levelCompleteContainer.setVisible(!1)}function he(){}function ge(e,n){if(t.menuContainer&&t.menuContainer.visible){const i=h.width/2,l=h.height/2+150;e>=i-100&&e<=i+100&&n>=l-25&&n<=l+25&&w.call(this,g.PLAYING)}}function fe(e,n){if(t.gameOverContainer&&t.gameOverContainer.visible){const i=h.width/2,o=h.height/2,l=o+20;if(e>=i-90&&e<=i+90&&n>=l-22&&n<=l+22){w.call(this,g.PLAYING);return}const a=o+80;if(e>=i-70&&e<=i+70&&n>=a-20&&n<=a+20){w.call(this,g.MENU);return}}}function me(e,n){w.call(this,g.PLAYING)}function be(e,n){}function pe(){let e=0;for(let n=0;n<y;n++)for(let i=0;i<m;i++)t.grid[n][i]&&e++;if(e===0){const n=Math.max(0,t.shotsUntilCeilingDrop*100),i=Math.max(0,Math.floor((6e4-(Date.now()-t.startTime))/1e3)*10);B(n+i),w.call(this,g.LEVEL_COMPLETE,{bonusPoints:n,timeBonus:i,totalScore:t.score,nextLevel:t.level+1})}}function we(){const e=y-2;for(let n=0;n<m;n++)if(t.grid[e]&&t.grid[e][n]){w.call(this,g.GAME_OVER,{reason:"Bubbles reached the bottom",finalScore:t.score,level:t.level});return}}function ye(e){(!e||e.restart)&&(t.score=0,t.level=1,t.shotsFired=0,t.shotsUntilCeilingDrop=6,t.ceilingRow=0,t.startTime=Date.now(),xe.call(this),D.call(this),F.call(this)),t.currentBubble||I.call(this),u.log("🎮 Gameplay started!")}function xe(){t.bubbleGroup&&t.bubbleGroup.clear(!0,!0);for(let e=0;e<y;e++)for(let n=0;n<m;n++)t.grid[e][n]=null}function Se(){t.stateText&&t.stateText.setText(`State: ${t.currentState}`)}function B(e){t.score+=e;const n=parseInt(localStorage.getItem("cannonpop_high_score")||"0");t.score>n&&(localStorage.setItem("cannonpop_high_score",t.score.toString()),window.handleScoreUpdate&&window.handleScoreUpdate({event:"newHighScore",score:t.score,previousHigh:n})),window.handleScoreUpdate&&window.handleScoreUpdate({event:"gameStats",score:t.score,level:t.level,shots:t.shotsFired})}function ve(e,n){try{const i=Ee(),o={score:e,level:n,date:new Date().toISOString(),timestamp:Date.now()};i.push(o),i.sort((a,c)=>c.score-a.score);const l=i.slice(0,10);return localStorage.setItem("cannonpop_high_scores",JSON.stringify(l)),u.log(`🏆 High score saved: ${e.toLocaleString()}`),l}catch(i){return u.error("❌ Failed to save high score:",i),[]}}function Ee(){try{const e=localStorage.getItem("cannonpop_high_scores");return e?JSON.parse(e):[]}catch(e){return u.error("❌ Failed to load high scores:",e),[]}}function U(){return A[Math.floor(Math.random()*A.length)]}function R(e){return{blue:1263238,red:15548199,yellow:16691738,cream:16643299,green:4504388,purple:12272827}[e]||16777215}function Pe(e,n){t.isAiming=!0,z.call(this,e,n)}function T(){t.isAiming=!1,t.aimingLine&&t.aimingLine.clear()}function Me(e,n){if(!t.currentBubble)return;const i=h.width/2,o=h.height-60;let l=Phaser.Math.Angle.Between(i,o-40,e,n);const a=Math.PI*.8,c=Math.PI*.2;l>a&&(l=a),l<c&&(l=c),t.currentAimAngle=l}function z(e,n){if(!t.aimingLine)return;const i=h.width/2,o=h.height-60;t.aimingLine.clear(),t.aimingLine.lineStyle(3,16777215,.7);const l=150,a=i+Math.cos(t.currentAimAngle)*l,c=o+Math.sin(t.currentAimAngle)*l;t.aimingLine.moveTo(i,o-40),t.aimingLine.lineTo(a,c);for(let r=1;r<=5;r++){const s=i+Math.cos(t.currentAimAngle)*(l*r/5),f=o+Math.sin(t.currentAimAngle)*(l*r/5);t.aimingLine.fillStyle(16777215,.5),t.aimingLine.fillCircle(s,f,2)}}function Ce(){}window.initializeCannonPopGame=function(){if(window.gameInstance){u.log("🎮 Game already initialized");return}if(u.log("🚀 Manual game initialization triggered"),document.readyState!=="loading"){u.log("🎯 Initializing Mobile-Optimized Phaser game..."),u.log("🔍 DOM loaded, Phaser available:",typeof Phaser<"u"),u.log("🔍 Game container exists:",!!document.getElementById("game-container"));const e=document.querySelector(".loading");e&&(u.log("🔍 Removing loading message"),e.style.display="none");try{u.log("🔍 Creating Phaser game with config:",h),C=new Phaser.Game(h),window.gameInstance=C,u.log("✅ Mobile-optimized Phaser game created successfully"),C.events.on("ready",()=>{u.log("🎮 Phaser game is ready and running!")})}catch(n){u.error("❌ Error creating Phaser game:",n);const i=document.getElementById("game-container");i&&(i.innerHTML=`
                    <div style="color: #f5f1e8; text-align: center; padding: 20px;">
                        <h3>Game Loading Error</h3>
                        <p>Failed to initialize the game engine.</p>
                        <p style="font-size: 12px; opacity: 0.7;">Check console for details.</p>
                    </div>
                `)}}};document.addEventListener("DOMContentLoaded",()=>{u.log("🎯 DOM loaded - calling manual initialization..."),window.initializeCannonPopGame()});window.gameState=t;window.GAME_CONFIG=h;window.restartGame=function(){if(u.log("🔄 Restart game requested"),window.gameInstance&&window.gameInstance.scene.scenes[0]){const e=window.gameInstance.scene.scenes[0];w.call(e,g.PLAYING,{restart:!0}),u.log("✅ Game restarted")}};window.pauseGame=function(){if(u.log("⏸️ Pause game requested"),window.gameInstance&&window.gameInstance.scene.scenes[0]){const e=window.gameInstance.scene.scenes[0];w.call(e,g.PAUSED),u.log("✅ Game paused")}};window.resumeGame=function(){if(u.log("▶️ Resume game requested"),window.gameInstance&&window.gameInstance.scene.scenes[0]){const e=window.gameInstance.scene.scenes[0];w.call(e,g.PLAYING),u.log("✅ Game resumed")}};

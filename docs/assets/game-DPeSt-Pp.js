const C=()=>window.location.hostname==="localhost"||window.location.hostname.includes("127.0.0.1")||localStorage.getItem("debug")==="true",f={log:(...e)=>{C()&&console.log("[GAME]",...e)},warn:(...e)=>{C()&&console.warn("[GAME]",...e)},error:(...e)=>{console.error("[GAME]",...e)},info:(e,...i)=>{C()&&console.log("[GAME]",e,...i)}},d={type:Phaser.AUTO,width:400,height:600,parent:"game-container",backgroundColor:"#fff5e1",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:H,create:V,update:X},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:400,height:600,min:{width:320,height:480},max:{width:500,height:800}},input:{activePointers:3,touch:{capture:!0}},render:{antialias:!1,pixelArt:!1,roundPixels:!0}};let P,t={currentState:"MENU",score:0,level:1,shotsFired:0,shotsUntilCeilingDrop:6,canShoot:!1,lastStateChangeTime:0,powerUps:{bomb:0,rainbow:0,laser:0},specialBubbles:[],activePowerUp:null,grid:[],currentBubble:null,nextBubble:null,launcher:null,cannonBarrel:null,bubbleGroup:null,isAiming:!1,aimingLine:null,currentAimAngle:0,scoreText:null,levelText:null,shotsText:null,stateText:null,powerUpUI:null,menuContainer:null,gameOverContainer:null,bubblesCleared:0,totalBubbles:0,ceilingRow:0,startTime:null,lastShotTime:null};const g={MENU:"MENU",PLAYING:"PLAYING",PAUSED:"PAUSED",GAME_OVER:"GAME_OVER",LEVEL_COMPLETE:"LEVEL_COMPLETE"},b=8,p=12,m=20,G=["blue","red","yellow","cream","green","purple"];function H(){f.log("🎯 Phaser preload() called"),f.log("🔍 Scale dimensions:",this.scale.width,"x",this.scale.height),this.load.image("splash-logo","/images/cannon_with_text.png"),G.forEach(e=>{re.call(this,e)}),f.log("🎮 Game assets loaded")}function V(){f.log("🚀 Initializing CannonPop game..."),t.bubbleGroup=this.physics.add.group(),Y.call(this),J.call(this),j.call(this),q.call(this),x.call(this,g.MENU),window.handleGameLoaded&&window.handleGameLoaded(),f.log("✅ CannonPop game initialized")}function X(){switch(t.currentState){case g.PLAYING:t.currentBubble&&Ae.call(this),ye.call(this),xe.call(this);break}}function x(e,i={}){const n=t.currentState;f.log(`🔄 State change: ${n} → ${e}`),$.call(this,n),t.currentState=e,t.lastStateChangeTime=Date.now(),t.canShoot=!1,e===g.PLAYING&&setTimeout(()=>{t.canShoot=!0},300),W.call(this,e,i),window.handleScoreUpdate&&window.handleScoreUpdate({event:"stateChanged",oldState:n,newState:e,data:i})}function $(e){switch(e){case g.MENU:se.call(this);break;case g.PLAYING:break;case g.GAME_OVER:de.call(this);break;case g.LEVEL_COMPLETE:ue.call(this);break}}function W(e,i){switch(e){case g.MENU:le.call(this);break;case g.PLAYING:Se.call(this,i);break;case g.PAUSED:ge.call(this);break;case g.GAME_OVER:t.score>0&&Ee(t.score,t.level),ce.call(this,i);break;case g.LEVEL_COMPLETE:he.call(this,i);break}ve.call(this)}function Y(){t.grid=[];for(let e=0;e<p;e++){t.grid[e]=[];for(let i=0;i<b;i++)t.grid[e][i]=null}F.call(this)}const B=60,k=30;function w(e,i){const n=i%2*m,o=B+e*m*2+n,r=k+i*m*1.7;return{x:o,y:r}}function L(e,i){const n=Math.round((i-k)/(m*1.7)),o=n%2*m,r=Math.round((e-B-o)/(m*2)),a=Math.max(0,Math.min(b-1,r)),s=Math.max(0,Math.min(p-1,n));return{col:a,row:s}}function F(){const e=[["red","blue","red","blue","red","blue","red","blue"],["blue","green","blue","green","blue","green","blue"],["green","yellow","green","yellow","green","yellow","green","yellow"],["yellow","purple","yellow","purple","yellow","purple","yellow"],["purple","red","purple","red","purple","red","purple","red"]];for(let i=0;i<e.length;i++)for(let n=0;n<e[i].length;n++)if(e[i][n]&&n<b){const o=e[i][n],r=w(n,i),a=this.physics.add.sprite(r.x,r.y,o+"_bubble");a.setCircle(m),a.setImmovable(!0),a.color=o,a.setDepth(20),a.gridCol=n,a.gridRow=i,t.bubbleGroup.add(a),t.grid[i][n]=a}}function J(){const e=b*m*2,i=p*m*1.7,n=10,o=B-n,r=k-n,a=e+n*2,s=i+n,l=this.add.graphics();l.lineStyle(6,4009506,1),l.strokeRect(o,r,a,s),l.lineStyle(2,10325634,.8),l.strokeRect(o+6,r+6,a-12,s-12),l.setDepth(5),t.playAreaBorder=l}function j(){const e=d.width/2,i=d.height-60;t.launcher=this.add.container(e,i),t.launcher.setDepth(10);const n=this.add.rectangle(0,20,90,30,4473924);n.setStrokeStyle(3,2236962),t.launcher.add(n);const o=this.add.rectangle(-30,35,15,20,3355443);o.setStrokeStyle(2,1118481);const r=this.add.rectangle(30,35,15,20,3355443);r.setStrokeStyle(2,1118481),t.launcher.add([o,r]);const a=this.add.rectangle(0,15,70,8,5592405);a.setStrokeStyle(1,3355443),t.launcher.add(a),t.cannonBarrel=this.add.rectangle(0,-5,70,18,5592405),t.cannonBarrel.setStrokeStyle(2,3355443),t.cannonBarrel.setOrigin(.8,.5),t.launcher.add(t.cannonBarrel);const s=this.add.circle(-25,-5,12,2236962);s.setStrokeStyle(3,1118481),t.launcher.add(s);const l=this.add.rectangle(-10,-5,4,22,4473924),c=this.add.rectangle(5,-5,4,22,4473924);t.launcher.add([l,c]);const u=this.add.circle(15,-5,8,3355443);u.setStrokeStyle(2,1118481),t.launcher.add(u);const h=this.add.triangle(-35,-10,0,0,8,-12,0,-8,16739125),y=this.add.triangle(35,-10,0,0,-8,-12,0,-8,16739125);t.launcher.add([h,y]),t.cannonOriginalY=i,t.cannonBarrel=t.cannonBarrel,O.call(this),U.call(this)}function O(){t.currentBubble&&t.currentBubble.destroy();const e=t.nextBubble?t.nextBubble.color:N(),i=d.width/2,n=d.height-60;t.currentBubble=this.physics.add.sprite(i,n-40,e+"_bubble"),t.currentBubble.setCircle(m),t.currentBubble.color=e,t.currentBubble.setDepth(20),U.call(this)}function U(){t.nextBubble&&t.nextBubble.destroy();const e=N(),i=d.width-60,n=d.height-60;t.nextBubble=this.add.sprite(i,n,e+"_bubble"),t.nextBubble.setScale(.7),t.nextBubble.color=e,t.nextBubble.setDepth(20)}function q(){this.input.on("pointerdown",Q.bind(this)),this.input.on("pointermove",K.bind(this)),this.input.on("pointerup",Z.bind(this)),this.input.addPointer(2),this.input.topOnly=!1}function Q(e){switch(navigator.vibrate&&e.event&&e.event.touches&&navigator.vibrate(50),t.touchStartX=e.x,t.touchStartY=e.y,t.touchStartTime=Date.now(),t.currentState){case g.MENU:fe.call(this,e.x,e.y);break;case g.PLAYING:t.currentBubble&&Ce.call(this,e.x,e.y);break;case g.PAUSED:me.call(this,e.x,e.y);break;case g.GAME_OVER:be.call(this,e.x,e.y);break;case g.LEVEL_COMPLETE:pe.call(this,e.x,e.y);break}}function K(e){t.currentState!==g.PLAYING||!t.currentBubble||(Pe.call(this,e.x,e.y),t.aimingLine&&z.call(this,e.x,e.y))}function Z(e){if(t.currentState!==g.PLAYING||!t.currentBubble)return;if(!t.canShoot){f.log("🚫 Shooting blocked - too soon after state change"),_.call(this);return}const i=Date.now()-t.touchStartTime,n=Phaser.Math.Distance.Between(t.touchStartX,t.touchStartY,e.x,e.y);i<200&&n<20?D.call(this,e.x,e.y):t.isAiming&&D.call(this,e.x,e.y),_.call(this)}function D(e,i){if(!t.currentBubble)return;t.shotsFired++;const n=d.width/2,o=d.height-60,r=Phaser.Math.Angle.Between(n,o-40,e,i),a=300,s=Math.cos(r)*a,l=Math.sin(r)*a;t.currentBubble.setVelocity(s,l),t.currentBubble.setBounce(.8,.8),t.currentBubble.setCollideWorldBounds(!0),t.currentBubble.setData("inFlight",!0),this.physics.add.overlap(t.currentBubble,t.bubbleGroup,(c,u)=>{c.getData("inFlight")&&(c.setData("inFlight",!1),ee.call(this,c,u))},null,this),t.currentBubble=null,window.handleScoreUpdate&&window.handleScoreUpdate({event:"gameStats",score:t.score,level:t.level,shots:t.shotsFired}),this.time.delayedCall(500,()=>{O.call(this)})}function ee(e,i){e.setVelocity(0,0),e.body.enable=!1;const n=L(i.x,i.y),o=te(n.col,n.row,e.x,e.y);if(!o){const a=L(e.x,e.y);if(I(a.col,a.row)&&!t.grid[a.row][a.col]){const l=w(a.col,a.row);e.setPosition(l.x,l.y),t.bubbleGroup.add(e),t.grid[a.row][a.col]={color:e.texture.key.replace("_bubble",""),sprite:e},A.call(this,a.col,a.row);return}const s=ne(e.x,e.y);if(s){const l=w(s.col,s.row);e.setPosition(l.x,l.y),t.bubbleGroup.add(e),t.grid[s.row][s.col]={color:e.texture.key.replace("_bubble",""),sprite:e},A.call(this,s.col,s.row);return}f.warn("⚠️ No valid position found, destroying bubble"),e.destroy();return}const r=w(o.col,o.row);e.setPosition(r.x,r.y),t.bubbleGroup.add(e),t.grid[o.row]&&(t.grid[o.row][o.col]={color:e.texture.key.replace("_bubble",""),sprite:e}),A.call(this,o.col,o.row)}function te(e,i,n,o){const r=i%2===0;let a;r?a=[{c:e-1,r:i},{c:e+1,r:i},{c:e-1,r:i-1},{c:e,r:i-1},{c:e-1,r:i+1},{c:e,r:i+1}]:a=[{c:e-1,r:i},{c:e+1,r:i},{c:e,r:i-1},{c:e+1,r:i-1},{c:e,r:i+1},{c:e+1,r:i+1}];const s=a.filter(({c:l,r:c})=>I(l,c)&&!t.grid[c][l]);return s.length===0?null:(n!==void 0&&o!==void 0&&s.sort((l,c)=>{const u=w(l.c,l.r),h=w(c.c,c.r),y=Phaser.Math.Distance.Between(n,o,u.x,u.y),S=Phaser.Math.Distance.Between(n,o,h.x,h.y);return y-S}),{col:s[0].c,row:s[0].r})}function ne(e,i){const n=L(e,i),o=3;for(let r=0;r<=o;r++)for(let a=Math.max(0,n.row-r);a<=Math.min(p-1,n.row+r);a++)for(let s=Math.max(0,n.col-r);s<=Math.min(b-1,n.col+r);s++)if(I(s,a)&&!t.grid[a][s])return{col:s,row:a};return null}function I(e,i){return i>=0&&i<p&&e>=0&&e<b}function A(e,i){const n=t.grid[i][e];if(!n)return;let o;if(n.color)o=n.color;else if(n.texture&&n.texture.key)o=n.texture.key.replace("_bubble","");else return;const r=new Set,a=[];function s(l,c){const u=`${l},${c}`;if(r.has(u)||!t.grid[c]||!t.grid[c][l])return;const h=t.grid[c][l];let y;if(h.color)y=h.color;else if(h.texture&&h.texture.key)y=h.texture.key.replace("_bubble","");else return;if(y!==o)return;r.add(u),a.push({col:l,row:c});const S=c%2===0;let v;S?v=[{c:l-1,r:c},{c:l+1,r:c},{c:l-1,r:c-1},{c:l,r:c-1},{c:l-1,r:c+1},{c:l,r:c+1}]:v=[{c:l-1,r:c},{c:l+1,r:c},{c:l,r:c-1},{c:l+1,r:c-1},{c:l,r:c+1},{c:l+1,r:c+1}],v.forEach(({c:E,r:M})=>{E>=0&&E<b&&M>=0&&M<p&&s(E,M)})}s(e,i),a.length>=3&&(a.forEach(({col:l,row:c})=>{if(t.grid[c]&&t.grid[c][l]){const u=t.grid[c][l];let h=null;u.sprite?h=u.sprite:u.destroy&&(h=u),h&&h.x!==void 0&&h.y!==void 0&&ae.call(this,h.x,h.y,h),h&&h.destroy&&typeof h.destroy=="function"&&this.time.delayedCall(150,()=>{h.active&&h.destroy()}),t.grid[c][l]=null}}),T(a.length*10),oe.call(this))}function ie(){const e=new Set;function i(n,o){const r=`${n},${o}`;if(e.has(r)||!t.grid[o]||!t.grid[o][n])return;e.add(r);const a=o%2===0;let s;a?s=[{c:n-1,r:o},{c:n+1,r:o},{c:n-1,r:o-1},{c:n,r:o-1},{c:n-1,r:o+1},{c:n,r:o+1}]:s=[{c:n-1,r:o},{c:n+1,r:o},{c:n,r:o-1},{c:n+1,r:o-1},{c:n,r:o+1},{c:n+1,r:o+1}],s.forEach(({c:l,r:c})=>{l>=0&&l<b&&c>=0&&c<p&&i(l,c)})}for(let n=0;n<b;n++)t.grid[0][n]&&i(n,0);return e}function oe(){const e=ie(),i=[];for(let n=0;n<p;n++)for(let o=0;o<b;o++)if(t.grid[n][o]){const r=`${o},${n}`;e.has(r)||i.push({col:o,row:n})}i.length>0&&(f.log(`💧 Dropping ${i.length} floating bubble(s)`),i.forEach(({col:n,row:o})=>{const r=t.grid[o][n];let a=null;r.sprite?a=r.sprite:r.destroy&&(a=r),a&&a.destroy&&typeof a.destroy=="function"&&this.tweens.add({targets:a,y:d.height+100,angle:Math.random()*360,alpha:.5,duration:800+Math.random()*400,ease:"Quad.easeIn",onComplete:()=>{a.active&&a.destroy()}}),t.grid[o][n]=null}),T(i.length*20))}function ae(e,i,n){let o=16777215;if(n.texture&&n.texture.key){const l=n.texture.key.replace("_bubble","");o=R(l)}this.tweens.add({targets:n,scaleX:1.3,scaleY:1.3,alpha:0,duration:150,ease:"Power2"});const r=8;for(let l=0;l<r;l++){const c=l/r*Math.PI*2,u=30+Math.random()*20,h=e+Math.cos(c)*u,y=i+Math.sin(c)*u,S=this.add.circle(e,i,3+Math.random()*3,o,.8);this.tweens.add({targets:S,x:h,y,alpha:0,scaleX:.5,scaleY:.5,duration:200+Math.random()*100,ease:"Power2",onComplete:()=>S.destroy()})}const a=this.add.circle(e,i,m,16777215,.6);this.tweens.add({targets:a,scaleX:1.5,scaleY:1.5,alpha:0,duration:150,ease:"Power2",onComplete:()=>a.destroy()});const s=this.add.text(e,i,"+10",{fontSize:"16px",fill:"#ffff00",fontFamily:"Arial",fontStyle:"bold",stroke:"#000000",strokeThickness:3}).setOrigin(.5);this.tweens.add({targets:s,y:i-30,alpha:0,duration:400,ease:"Power2",onComplete:()=>s.destroy()})}function re(e){const i=this.add.graphics(),n=m,o=R(e);i.fillStyle(o,1),i.fillEllipse(n,n-2,n*2,n*2.1),i.fillStyle(16777215,.1),i.fillEllipse(n-4,n-5,4,6);const r=n*2+4,a=n*2+4;i.generateTexture(e+"_bubble",r,a),i.destroy()}function le(){if(t.menuContainer){t.menuContainer.setVisible(!0);return}t.menuContainer=this.add.container(d.width/2,d.height/2);const e=this.add.rectangle(0,0,d.width-40,d.height-100,0,.8);e.setStrokeStyle(2,9268835);const i=this.add.container(0,-100),n=this.add.image(0,0,"splash-logo"),o=d.width*.8,r=200,a=o/n.width,s=r/n.height,l=Math.min(a,s,1);n.setScale(l),i.add(n);const c=this.add.text(0,80,`Tap and shoot bubbles
Match 3+ to clear
Clear all bubbles to win!`,{fontSize:"14px",fill:"#f5f1e8",fontFamily:"Arial",align:"center"}).setOrigin(.5),u=this.add.rectangle(0,150,200,50,9268835);u.setStrokeStyle(2,16118248),u.setInteractive({useHandCursor:!0});const h=this.add.text(0,150,"Start Game",{fontSize:"18px",fill:"#f5f1e8",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5);t.menuContainer.add([e,i,c,u,h]),u.buttonType="start"}function se(){t.menuContainer&&t.menuContainer.setVisible(!1)}function ce(e){if(t.gameOverContainer){t.gameOverContainer.setVisible(!0);return}t.gameOverContainer=this.add.container(d.width/2,d.height/2);const i=this.add.rectangle(0,0,d.width-40,d.height-100,0,.9);i.setStrokeStyle(2,16729156);const n=this.add.text(0,-120,"💥 Game Over",{fontSize:"28px",fill:"#ff4444",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5),o=this.add.text(0,-70,`Final Score: ${t.score.toLocaleString()}`,{fontSize:"18px",fill:"#f5f1e8",fontFamily:"Arial"}).setOrigin(.5),r=this.add.text(0,-40,`Level Reached: ${t.level}`,{fontSize:"16px",fill:"#8d6e63",fontFamily:"Arial"}).setOrigin(.5),a=this.add.rectangle(0,20,180,45,9268835);a.setStrokeStyle(2,16118248),a.setInteractive({useHandCursor:!0});const s=this.add.text(0,20,"Play Again",{fontSize:"16px",fill:"#f5f1e8",fontFamily:"Arial",fontStyle:"bold"}).setOrigin(.5),l=this.add.rectangle(0,80,140,40,6114933);l.setStrokeStyle(2,16118248),l.setInteractive({useHandCursor:!0});const c=this.add.text(0,80,"Main Menu",{fontSize:"14px",fill:"#f5f1e8",fontFamily:"Arial"}).setOrigin(.5);t.gameOverContainer.add([i,n,o,r,a,s,l,c]),a.buttonType="restart",l.buttonType="menu"}function de(){t.gameOverContainer&&t.gameOverContainer.setVisible(!1)}function he(e){}function ue(){t.levelCompleteContainer&&t.levelCompleteContainer.setVisible(!1)}function ge(){}function fe(e,i){if(t.menuContainer&&t.menuContainer.visible){const n=d.width/2,r=d.height/2+150;e>=n-100&&e<=n+100&&i>=r-25&&i<=r+25&&x.call(this,g.PLAYING)}}function be(e,i){if(t.gameOverContainer&&t.gameOverContainer.visible){const n=d.width/2,o=d.height/2,r=o+20;if(e>=n-90&&e<=n+90&&i>=r-22&&i<=r+22){x.call(this,g.PLAYING);return}const a=o+80;if(e>=n-70&&e<=n+70&&i>=a-20&&i<=a+20){x.call(this,g.MENU);return}}}function me(e,i){x.call(this,g.PLAYING)}function pe(e,i){}function ye(){let e=0;for(let i=0;i<p;i++)for(let n=0;n<b;n++)t.grid[i][n]&&e++;if(e===0){const i=Math.max(0,t.shotsUntilCeilingDrop*100),n=Math.max(0,Math.floor((6e4-(Date.now()-t.startTime))/1e3)*10);T(i+n),x.call(this,g.LEVEL_COMPLETE,{bonusPoints:i,timeBonus:n,totalScore:t.score,nextLevel:t.level+1})}}function xe(){const e=p-2;for(let i=0;i<b;i++)if(t.grid[e]&&t.grid[e][i]){x.call(this,g.GAME_OVER,{reason:"Bubbles reached the bottom",finalScore:t.score,level:t.level});return}}function Se(e){(!e||e.restart)&&(t.score=0,t.level=1,t.shotsFired=0,t.shotsUntilCeilingDrop=6,t.ceilingRow=0,t.startTime=Date.now(),we.call(this),Y.call(this),F.call(this)),t.currentBubble||O.call(this),f.log("🎮 Gameplay started!")}function we(){t.bubbleGroup&&t.bubbleGroup.clear(!0,!0);for(let e=0;e<p;e++)for(let i=0;i<b;i++)t.grid[e][i]=null}function ve(){t.stateText&&t.stateText.setText(`State: ${t.currentState}`)}function T(e){t.score+=e;const i=parseInt(localStorage.getItem("cannonpop_high_score")||"0");t.score>i&&(localStorage.setItem("cannonpop_high_score",t.score.toString()),window.handleScoreUpdate&&window.handleScoreUpdate({event:"newHighScore",score:t.score,previousHigh:i})),window.handleScoreUpdate&&window.handleScoreUpdate({event:"gameStats",score:t.score,level:t.level,shots:t.shotsFired})}function Ee(e,i){try{const n=Me(),o={score:e,level:i,date:new Date().toISOString(),timestamp:Date.now()};n.push(o),n.sort((a,s)=>s.score-a.score);const r=n.slice(0,10);return localStorage.setItem("cannonpop_high_scores",JSON.stringify(r)),f.log(`🏆 High score saved: ${e.toLocaleString()}`),r}catch(n){return f.error("❌ Failed to save high score:",n),[]}}function Me(){try{const e=localStorage.getItem("cannonpop_high_scores");return e?JSON.parse(e):[]}catch(e){return f.error("❌ Failed to load high scores:",e),[]}}function N(){return G[Math.floor(Math.random()*G.length)]}function R(e){return{blue:1263238,red:15548199,yellow:16691738,cream:16643299,green:4504388,purple:12272827}[e]||16777215}function Ce(e,i){t.isAiming=!0,t.aimingLine||(t.aimingLine=this.add.graphics(),t.aimingLine.setDepth(15)),z.call(this,e,i)}function _(){t.isAiming=!1,t.aimingLine&&t.aimingLine.clear()}function Pe(e,i){if(!t.currentBubble)return;const n=d.width/2,o=d.height-60;let r=Phaser.Math.Angle.Between(n,o-40,e,i);const a=Math.PI*.8,s=Math.PI*.2;r>a&&(r=a),r<s&&(r=s),t.currentAimAngle=r}function z(e,i){if(!t.aimingLine)return;const n=d.width/2,o=d.height-60;t.aimingLine.clear(),t.aimingLine.lineStyle(3,16777215,.7);const r=150,a=n+Math.cos(t.currentAimAngle)*r,s=o+Math.sin(t.currentAimAngle)*r;t.aimingLine.moveTo(n,o-40),t.aimingLine.lineTo(a,s);for(let l=1;l<=5;l++){const c=n+Math.cos(t.currentAimAngle)*(r*l/5),u=o+Math.sin(t.currentAimAngle)*(r*l/5);t.aimingLine.fillStyle(16777215,.5),t.aimingLine.fillCircle(c,u,2)}}function Ae(){}window.initializeCannonPopGame=function(){if(window.gameInstance){f.log("🎮 Game already initialized");return}if(f.log("🚀 Manual game initialization triggered"),document.readyState!=="loading"){f.log("🎯 Initializing Mobile-Optimized Phaser game..."),f.log("🔍 DOM loaded, Phaser available:",typeof Phaser<"u"),f.log("🔍 Game container exists:",!!document.getElementById("game-container"));const e=document.querySelector(".loading");e&&(f.log("🔍 Removing loading message"),e.style.display="none");try{f.log("🔍 Creating Phaser game with config:",d),P=new Phaser.Game(d),window.gameInstance=P,f.log("✅ Mobile-optimized Phaser game created successfully"),P.events.on("ready",()=>{f.log("🎮 Phaser game is ready and running!")})}catch(i){f.error("❌ Error creating Phaser game:",i);const n=document.getElementById("game-container");n&&(n.innerHTML=`
                    <div style="color: #f5f1e8; text-align: center; padding: 20px;">
                        <h3>Game Loading Error</h3>
                        <p>Failed to initialize the game engine.</p>
                        <p style="font-size: 12px; opacity: 0.7;">Check console for details.</p>
                    </div>
                `)}}};document.addEventListener("DOMContentLoaded",()=>{f.log("🎯 DOM loaded - calling manual initialization..."),window.initializeCannonPopGame()});window.gameState=t;window.GAME_CONFIG=d;
